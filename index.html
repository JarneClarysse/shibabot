<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="timer.css">
    <link href="https://fonts.googleapis.com/css?family=Chakra+Petch|Orbitron" rel="stylesheet">
</head>
<body>
    <div id="wrapper">

        <div id="header">
            dit is een header
        </div>
        <div id="timerwrapper">
            <div id="lefttriangle">
            </div>
            <div id="timer">
                dit is de timer
            </div>
            <div id="righttriangle">
            </div>
        </div>
        <div id="alarmwrapper">
            <div id="lefttriangle2">
            </div>
            <div id ="createAlarm">
                <button id="alarmButton" type="button" onclick="showMenu()"> + Add Alarm</button>

                
            </div>
            <div id="righttriangle2">
            </div>
        </div>
        <div id="alarmMenu">
            <div id="intervalwrapper">
                <div id="lefttriangle2">
                </div>
                <form id="intervalSelectie">
                    <div id="interval-text">
                        select time interval:
                    </div>
                    <input type="number" id ="intervalTijdUur" name="intervalTijdUur" min="00" max="23" maxlength="2" required value="00">
                    <input type="number" id ="intervalTijdMin" name="intervalTijdMin" min="00" max="59" maxlength="2" required value="00">
                    <input type="number" id ="intervalTijdSec" name="intervalTijdSec" min="00" max="59" maxlength="2" required value="00">
                    <div>
                        <textarea id="titlebar" rows="1" cols="50" >
                            Vul hier u title in!
                        </textarea>
                    </div>
                </form>
                
                <div id="righttriangle2">
                </div>
            </div>
            <div id="soundwrapper">
                <div id="lefttriangle4">
                </div>
                <div id=soundSelect>
                    <div class="grid-container">
                        <div id="row-1" class="grid-item">
                            <label class="radio-container">
                                <input type="radio" name="sound" id="sound1" checked="checked" onchange="updateChoice('1');">
                                <span class="checkmark"></span>
                            </label>
                            <audio ontimeupdate="checkStopTime('player')" src="82.99 A.M.mp3" id="player"></audio>  
                            <button class="green-button-style" onclick="play('player')">Play</button>
                            <button class="green-button-style" onclick="pause('player')">Pause</button>
                            <div class="custom-select">
                                <select class="green-button-style" id="select-row1" onchange="selectionShow('1')">
                                    <option value="Full Sound">Full Sound</option>
                                    <option value="Selection">Selection</option>
                                </select>
                            </div>
                        </div>
                        <form id="select-time-row1" class="grid-item">
                            Start:
                            <input onchange="updateSegment('1')" type="number" id ="startTimeMin-row1" name="startTimeMin-row1" min="00" max="23" maxlength="2" required value="00" class="green-interval-boxes" >
                            <input onchange="updateSegment('1')" type="number" id ="startTimeSec-row1" name="startTimeSec-row1" min="00" max="23" maxlength="2" required value="00" class="green-interval-boxes" >
                            End:
                            <input onchange="updateSegment('1')" type="number" id ="endTimeMin-row1" name="endTimeMin-row1" min="00" max="59" maxlength="2" required value="00" class="green-interval-boxes" >
                            <input onchange="updateSegment('1')" type="number" id ="endTimeSec-row1" name="endTimeSec-row1" min="00" max="59" maxlength="2" required value="00" class="green-interval-boxes" >
                        </form>
                        

                        <div id="row-2" class="grid-item">
                            <label class="radio-container">
                                <input type="radio" name="sound" id="sound2" onchange="updateChoice('2');">
                                <span class="checkmark" ></span>
                            </label>
                            <audio ontimeupdate="checkStopTime('player2')" src="so-so.mp3" id="player2"></audio>
                            <button class="green-button-style" onclick="play('player2')">Play</button>
                            <button class="green-button-style" onclick="pause('player2')">Pause</button>
                            <div class="custom-select">

                                <select class="green-button-style" id="select-row2" onchange="selectionShow('2')">
                                    <option value="Full Sound">Full Sound</option>
                                    <option value="Selection">Selection</option>
                                </select>
                            </div>
                        </div>
                        <form id="select-time-row2" class="grid-item">
                            Start:
                            <input onchange="updateSegment('2')" type="number" id ="startTimeMin-row2" name="startTimeMin-row2" min="00" max="23" maxlength="2" required value="00" class="green-interval-boxes" >
                            <input onchange="updateSegment('2')" type="number" id ="startTimeSec-row2" name="startTimeSec-row2" min="00" max="23" maxlength="2" required value="00" class="green-interval-boxes" >
                            End:
                            <input onchange="updateSegment('2')" type="number" id ="endTimeMin-row2" name="endTimeMin-row2" min="00" max="59" maxlength="2" required value="00" class="green-interval-boxes" >
                            <input onchange="updateSegment('2')" type="number" id ="endTimeSec-row2" name="endTimeSec-row2" min="00" max="59" maxlength="2" required value="00" class="green-interval-boxes" >
                        </form>
                        
                        <div id="row-3" class="grid-item">
                            <label class="radio-container">
                                <input type="radio" name="sound" id="sound3" onchange="updateChoice('3');">
                                <span class="checkmark"></span>
                            </label>
                            <audio ontimeupdate="checkStopTime('player3')" src="Shine.mp3" id="player3"></audio>
                            <button class="green-button-style" onclick="play('player3')">Play</button>
                            <button class="green-button-style" onclick="pause('player3')">Pause</button>
                            <div class="custom-select">

                                <select class="green-button-style" id="select-row3" onchange="selectionShow('3')">
                                    <option value="Full Sound">Full Sound</option>
                                    <option value="Selection">Selection</option>
                                </select>
                            </div>
                        </div>
                        <form id="select-time-row3" class="grid-item">
                            Start:
                            <input onchange="updateSegment('3')" type="number" id ="startTimeMin-row3" name="startTimeMin-row3" min="00" max="23" maxlength="2" required value="00" class="green-interval-boxes" >
                            <input onchange="updateSegment('3')" type="number" id ="startTimeSec-row3" name="startTimeSec-row3" min="00" max="23" maxlength="2" required value="00" class="green-interval-boxes" >
                            End:
                            <input onchange="updateSegment('3')" type="number" id ="endTimeMin-row3" name="endTimeMin-row3" min="00" max="59" maxlength="2" required value="00" class="green-interval-boxes" >
                            <input onchange="updateSegment('3')" type="number" id ="endTimeSec-row3" name="endTimeSec-row3" min="00" max="59" maxlength="2" required value="00" class="green-interval-boxes" >
                        </form>

                    </div>
                </div>
                <div id="righttriangle4">
                </div>
            </div>
            <div id="uploadwrapper">
                <div id="lefttriangle5">
                </div>
                <div id=soundUpload>
                    <label for="uploadedSound" class="custom-file-upload orange-button-style">
                        Choose Sound file
                    </label>
                    <span id="display-filename">No file selected</span>
                    <input type="file" id="uploadedSound" onchange="adjustSpan(this);"/>
                    <button class="orange-button-style" onclick="uploadSound()">Confirm</button>
                    
                    <div id="uploadedSoundPlayer">
                        <div  class="grid-container">
                            <div id="upload-left" class="grid-item">
                                <label class="radio-container">
                                    <input type="radio" name="sound" id="customSound" onchange="updateChoice('4');">
                                    <span class="checkmark-orange"></span>
                                </label>
                                <audio ontimeupdate="checkStopTime('player4')" src="Shine.mp3" id="player4"></audio>
                                <button class="orange-button-style" onclick="play('player4')">Play</button>
                                <button class="orange-button-style" onclick="pause('player4')">Pause</button>
                                <div class="custom-select-orange">

                                    <select class="orange-button-style" id="select-row-custom" onchange="selectionShow('4')">
                                        <option value="Full Sound">Full Sound</option>
                                        <option value="Selection">Selection</option>
                                    </select>
                                </div>
                            </div>
                            <form id="select-time-custom" class="grid-item">
                                Start:
                                <input onchange="updateSegment('4')" type="number" id ="startTimeMin-custom" name="startTimeMin-custom" min="00" max="23" maxlength="2" required value="00" class="orange-interval-boxes" >
                                <input onchange="updateSegment('4')" type="number" id ="startTimeSec-custom" name="startTimeSec-custom" min="00" max="23" maxlength="2" required value="00" class="orange-interval-boxes" >
                                End:
                                <input onchange="updateSegment('4')" type="number" id ="endTimeMin-custom" name="endTimeMin-custom" min="00" max="59" maxlength="2" required value="00" class="orange-interval-boxes" >
                                <input onchange="updateSegment('4')" type="number" id ="endTimeSec-custom" name="endTimeSec-custom" min="00" max="59" maxlength="2" required value="00" class="orange-interval-boxes" >
                            </form>
                        </div>
                    </div>
                </div>
                <div id="righttriangle5">
                </div>
            </div>
            <div id="setalarmwrapper">
                <div id="lefttriangle3">
                </div>
                <div id="setalarm">
                    <button id="set-alarm-button" onclick="setAlarm()">Set alarm</button>
                </div>
                <div id="righttriangle3">
                </div>
            </div>
        </div>
        <div id="test">
            dit is een test
        </div>
    </div>
    <script>
        //#ffe300 cool yellow colour
        var audio = new Audio('82.99 A.M.mp3');
        var segmentTime= [0,0,20];
        var startTime = [0,0,0];
        var pauseTime = 0;
        var interval = [-1,-1,-1];
        var nextAlarmTime = [-1,-1,-1];
        var playerList = ["player","player2","player3","player4"];
        var minInterval = [-1,-1,-1];
        var timeuntil = [-1,-1,-1];
        var onesecond = 0;
        var title ="";


        function setIntervalValues(){
            document.getElementById("intervalTijdUur").value=minInterval[0];
            document.getElementById("intervalTijdMin").value=minInterval[1];
            document.getElementById("intervalTijdSec").value=minInterval[2];
        }

        function updateChoice(id){
            if(id=='1'){
                updateMinInterval('player');
            } else if (id=='2'){
                updateMinInterval('player2');
            } else if (id=='3'){
                updateMinInterval('player3');
            } else if (id=='4'){
                updateMinInterval('player4');
            }
        }

        function updateMinInterval(playerid){


            minInterval = getEndTime(playerid);


            setIntervalValues();
        }

        function restartTime() {


        }

        function getEndTime(playerid){
            var player = document.getElementById(playerid);
            var minutes = "0" + Math.floor(player.duration / 60);
            var seconds = Math.floor(player.duration - minutes * 60);
            seconds = seconds+1;
            if(seconds<9){
                seconds = "0" +seconds;
            } 
            var interval = ["00",minutes,seconds];
            return interval;
        }

        function showMenu(){

            document.getElementById('alarmMenu').style.display='block';
            

            alarmbutton = document.getElementById('alarmwrapper');
            

            name = "slide-out-left";
            arr = alarmbutton.className.split(" ");
            if (arr.indexOf(name) == -1) {
                alarmbutton.className += " " + name;
            }
            setTimeout(function (){
                alarmbutton.style.display='none';
            }, 500)

            intervalwrapper = document.getElementById('intervalwrapper');
            soundwrapper = document.getElementById('soundwrapper');
            uploadwrapper = document.getElementById('uploadwrapper');
            setalarmwrapper = document.getElementById('setalarmwrapper');

            intervalwrapper.style.display='none';
            soundwrapper.style.display='none';
            uploadwrapper.style.display='none';
            setalarmwrapper.style.display='none';

            setTimeout(function (){
                intervalwrapper.style.display='block';
                name = "come-in-right";
                arr = intervalwrapper.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    intervalwrapper.className += " " + name;
                }
                updateMinInterval('player');
            }, 500)
            setTimeout(function (){
                soundwrapper.style.display='block';
                name = "come-in-left";
                arr = soundwrapper.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    soundwrapper.className += " " + name;
                }
            }, 1200)
            setTimeout(function (){
                uploadwrapper.style.display='block';
                name = "come-in-right";
                arr = uploadwrapper.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    uploadwrapper.className += " " + name;
                }
            }, 2000)
            setTimeout(function (){
                setalarmwrapper.style.display='block';
                name = "come-in-left";
                arr = setalarmwrapper.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    setalarmwrapper.className += " " + name;
                }
            }, 2800)
            setTimeout(function (){
                alarmbutton.classList.remove("slide-out-left");
                setalarmwrapper.classList.remove("come-in-left");
                soundwrapper.classList.remove("come-in-left");
                uploadwrapper.classList.remove("come-in-right");
                intervalwrapper.classList.remove("come-in-right");

            }, 3600)

            
        }

        function play(id) {
            var x
            for (x in playerList)  {
                document.getElementById(playerList[x]).pause();
            }
            var player = document.getElementById(id);
            if(id=='player'){
                var minutes = document.getElementById("startTimeMin-row1").value;
                minutes = Number(minutes);
                minutes = minutes*60;
                var seconds = document.getElementById("startTimeSec-row1").value;
                seconds = Number(seconds);
            } else if (id =='player2'){
                var minutes = document.getElementById("startTimeMin-row2").value;
                minutes = Number(minutes);
                minutes = minutes*60;
                var seconds = document.getElementById("startTimeSec-row2").value;
                seconds = Number(seconds);
            } else if (id =='player3'){
                var minutes = document.getElementById("startTimeMin-row3").value;
                minutes = Number(minutes);
                minutes = minutes*60;
                var seconds = document.getElementById("startTimeSec-row3").value;
                seconds = Number(seconds);
            } else if (id =='player4'){
                var minutes = document.getElementById("startTimeMin-custom").value;
                minutes = Number(minutes);
                minutes = minutes*60;
                var seconds = document.getElementById("startTimeSec-custom").value;
                seconds = Number(seconds);
            }
            var time = minutes+seconds;
            player.currentTime= time;
            player.play();
        }

        function pause(id) {
            document.getElementById(id).pause();
        }

        function setSound(){
            if (document.getElementById("sound1").checked ){
                audio = new Audio('82.99 A.M.mp3');
            }
            else if(document.getElementById("sound2").checked ){
                audio = new Audio('so-so.mp3');
            }
            else if(document.getElementById("sound3").checked ){
                audio = new Audio('Shine.mp3');
            }
            else if(document.getElementById("customSound").checked ){
                audio = document.getElementById("player4");
            }
        }




        function setInterval(){
            var h = document.getElementById("intervalTijdUur").value;
            var m = document.getElementById("intervalTijdMin").value;
            var s = document.getElementById("intervalTijdSec").value;

            if(Number(h)<Number(minInterval[0])){
                h = minInterval[0];
                m = minInterval[1];
                s = minInterval[2];
            } else if(Number(h)==Number(minInterval[0])){
                if(Number(m)<Number(minInterval[1])){
                    m = minInterval[1];
                    s = minInterval[2];
                } else if(Number(m)==Number(minInterval[1])){
                    if(Number(s)<Number(minInterval[2])){
                        s = minInterval[2];
                    }
                }
            }

            interval = [h,m,s];
            var today = new Date();

            setSound();
            nextAlarmTime = addTime([today.getHours(),today.getMinutes(),today.getSeconds()],[Number(h),Number(m),Number(s)]);
            timeuntil = [Number(h),Number(m),Number(s)];
        }

        function uploadSound(){
            var player = document.getElementById('player4');
            var soundfile = document.getElementById('uploadedSound');
            player.src = URL.createObjectURL(soundfile.files[0]);
            document.getElementById("uploadedSoundPlayer").style.display = "block";
        }

        function checkTime(i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        }




        function checkTimer(time) {
            console.log("time"+time);
            var timeStr = ""+time[0]+time[1]+time[2]+"";
            var alarmStr = ""+nextAlarmTime[0]+nextAlarmTime[1]+nextAlarmTime[2]+"";
            console.log("next"+nextAlarmTime);
            if(timeStr == alarmStr){
                nextAlarmTime = addTime(time, interval);
                audio.play();  
                return 1;     
            }
            second = nextAlarmTime[2]-Number(time[2]);
            minuut = nextAlarmTime[1]-Number(time[1]);
            uur = nextAlarmTime[0]-Number(time[0]);
            if(second<0){
                minuut = minuut -1;
                second = 60 + second;
            }
            if(minuut<0){
                uur = uur -1;
                minuut = 60 + minuut;
            }
            if(uur<0){
                uur = 0;
            }
            
            
            if(nextAlarmTime[2]!=-1){
                timeuntil = [uur,minuut,second];
            }
            console.log("timeuntil"+timeuntil);
            addTitlePlusTime();
            return 0;
        }

        function getPause(h,m,s){
            var time = addTime([h,m,s],segmentTime);
            h=h+Number(segmentTime[0]);
            m=m+Number(segmentTime[1]);
            s=s+Number(segmentTime[2]);
            return ""+time[0]+time[1]+time[2]+"";
        }

        function addTime(basic, addition){
            var seconds = Number(basic[2]) + Number(addition[2]);
            var minutes = Number(basic[1]) + Number(addition[1]);
            var hours = Number(basic[0]) + Number(addition[0]);
            if ((seconds-60)>0){
                minutes +=1;
            }
            if ((minutes-60)>0){
                hours +=1;
            }

            return [hours % 24, checkTime(minutes % 60), checkTime(seconds % 60)];
        }

        function setAlarm(){
            intervalwrapper = document.getElementById('intervalwrapper');
            soundwrapper = document.getElementById('soundwrapper');
            uploadwrapper = document.getElementById('uploadwrapper');
            setalarmwrapper = document.getElementById('setalarmwrapper');
            addTitlePlusTime();
            setInterval();

            name = "slide-out-right";
            arr = setalarmwrapper.className.split(" ");
            if (arr.indexOf(name) == -1) {
                setalarmwrapper.className += " " + name;
            }

            setTimeout(function (){
                name = "slide-out-left";
                arr = uploadwrapper.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    uploadwrapper.className += " " + name;
                }      
            }, 800)

            setTimeout(function (){
                name = "slide-out-right";
                arr = soundwrapper.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    soundwrapper.className += " " + name;
                }      
            }, 1600)
            
            setTimeout(function (){
                name = "slide-out-left";
                arr = intervalwrapper.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    intervalwrapper.className += " " + name;
                }
            }, 2400)

            setTimeout(function(){
                setalarmwrapper.style.display = 'none';
                uploadwrapper.style.display='none';
                soundwrapper.style.display='none';
                intervalwrapper.style.display='none';
                alarmbutton = document.getElementById('alarmwrapper');
                alarmbutton.style.display='block';
                name = "come-in-right";
                arr = alarmbutton.className.split(" ");
                if (arr.indexOf(name) == -1) {
                    alarmbutton.className += " " + name;
                }
                document.getElementById("alarmButton").firstChild.data="+ Reset Alarm";
            }, 3200)

            setTimeout(function(){
                alarmbutton.classList.remove("come-in-right");
                setalarmwrapper.classList.remove("slide-out-right");
                soundwrapper.classList.remove("slide-out-right");
                uploadwrapper.classList.remove("slide-out-left");
                intervalwrapper.classList.remove("slide-out-left");
            }, 4000)

            
        }

        function checkStopTime(id){
            var player = document.getElementById(id);
            var minuteid;
            var secondid;
            var selectid;

            if(id=='player'){
                minuteid = "endTimeMin-row1";
                secondid = "endTimeSec-row1";
                selectid = "select-row1";
                
            } else if (id =='player2'){
                minuteid = "endTimeMin-row2";
                secondid = "endTimeSec-row2";
                selectid = "select-row2";

            } else if (id =='player3'){
                minuteid = "endTimeMin-row3";
                secondid = "endTimeSec-row3";
                selectid = "select-row3";

            } else if (id =='player4'){
                minuteid = "endTimeMin-row4";
                secondid = "endTimeSec-row4";
                selectid = "select-row-custom";
                
            }

            var minutes = document.getElementById(minuteid).value;
            minutes = Number(minutes);
            minutes = minutes*60;
            var seconds = document.getElementById(secondid).value;
            seconds = Number(seconds);
            console.log(player.currentTime)
            console.log(minutes+seconds)
            if(document.getElementById(selectid).value!='Full Sound'){
                if(player.currentTime>(minutes+seconds)){
                    player.pause();
                }
            }
        }

        function updateSegment(id){
            console.log("entered");
            var vars = getSelectVars(id);
            console.log(vars[0]);
            console.log(document.getElementById(vars[0]).value);
            if(document.getElementById(vars[0]).value=='Selection'){
                document.getElementById(vars[1]).style.visibility = "visible";
                segmentTime [1] = document.getElementById(vars[3]).value - document.getElementById(vars[5]).value
                segmentTime [2] = document.getElementById(vars[4]).value - document.getElementById(vars[6]).value
                console.log(segmentTime[1]+" "+segmentTime[2]);
            }

        }
        
        function selectionShow(id){
            var vars = getSelectVars(id);
            if(document.getElementById(vars[0]).value=='Full Sound'){
                document.getElementById(vars[1]).style.visibility = "visible";
                var interval = getEndTime(vars[2]);
                document.getElementById(vars[3]).value = interval[1];
                document.getElementById(vars[4]).value = interval[2];
            } else {
                document.getElementById(vars[1]).style.visibility = "hidden";
                document.getElementById(vars[5]).value = "00";
                document.getElementById(vars[6]).value = "00";
                document.getElementById(vars[3]).value = "00";
                document.getElementById(vars[4]).value = "00";
            }
        }

        function getSelectVars(id){
            var selectid = 'select-row';
            var selectdiv = 'select-time-';
            var playerid = 'player';
            var endtimemin = "endTimeMin-";
            var endtimesec = "endTimeSec-";
            var starttimemin = "startTimeMin-"
            var starttimesec = "startTimeSec-"
            if(id=='1'){
                selectid = selectid +"1";
                selectdiv = selectdiv+"row1";
                endtimemin = endtimemin +"row1";
                endtimesec = endtimesec +"row1";
                starttimemin = starttimemin + "row1";
                starttimesec = starttimesec + "row1";

            } else if(id=='2'){
                selectid = selectid +"2";
                selectdiv = selectdiv+"row2";
                playerid = playerid + "2";
                endtimemin = endtimemin +"row2";
                endtimesec = endtimesec +"row2";
                starttimemin = starttimemin + "row2";
                starttimesec = starttimesec + "row2";
            } else if(id=='3'){
                selectid = selectid +"3";
                selectdiv = selectdiv+"row3";
                playerid = playerid + "3";
                endtimemin = endtimemin +"row3";
                endtimesec = endtimesec +"row3";
                starttimemin = starttimemin + "row3";
                starttimesec = starttimesec + "row3";
            } else if(id=='4'){
                selectid = selectid +"-custom";
                selectdiv = selectdiv+"custom";
                playerid = playerid + "4";
                endtimemin = endtimemin +"custom";
                endtimesec = endtimesec +"custom";
                starttimemin = starttimemin + "custom";
                starttimesec = starttimesec + "custom";
            }
            return [selectid,selectdiv,playerid,endtimemin,endtimesec,starttimemin,starttimesec]; 
        }

        var x, i, j, selElmnt, a, b, c;

        /*look for any elements with the class "custom-select":*/
        x = document.getElementsByClassName("custom-select");

        for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            
            /*for each element, create a new DIV that will act as the selected item:*/
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);

            /*for each element, create a new DIV that will contain the option list:*/
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items select-hide");
            for (j = 0; j < selElmnt.length; j++) {

                /*for each option in the original select element,
                create a new DIV that will act as an option item:*/
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                if(c.innerHTML == a.innerHTML){
                    c.setAttribute("class", "same-as-selected");
                }
                c.addEventListener("click", function(e) {

                    /*when an item is clicked, update the original select box,
                    and the selected item:*/
                    var y, i, k, s, h;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    h = this.parentNode.previousSibling;
                    if(s.id == "select-row1"){
                        selectionShow('1');
                    } else if (s.id == "select-row2"){
                        selectionShow('2');
                    } else if( s.id == "select-row3"){
                        selectionShow('3');
                    }
                    for (i = 0; i < s.length; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {

                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;

                            y = this.parentNode.getElementsByClassName("same-as-selected");
                            for (k = 0; k < y.length; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected");
                            break;
                        }
                    }
                    h.click();
                });
                b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function(e) {
                /*when the select box is clicked, close any other select boxes,
                and open/close the current select box:*/
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
            });
        }

        x = document.getElementsByClassName("custom-select-orange");
        
        for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            
            /*for each element, create a new DIV that will act as the selected item:*/
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected-orange");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);

            /*for each element, create a new DIV that will contain the option list:*/
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items-orange select-hide");
            for (j = 0; j < selElmnt.length; j++) {

                /*for each option in the original select element,
                create a new DIV that will act as an option item:*/
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                if(c.innerHTML == a.innerHTML){
                    c.setAttribute("class", "same-as-selected-orange");
                }
                c.addEventListener("click", function(e) {

                    /*when an item is clicked, update the original select box,
                    and the selected item:*/
                    var y, i, k, s, h;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    h = this.parentNode.previousSibling;
                    if(s.id == "select-row1"){
                        selectionShow('1');
                    } else if (s.id == "select-row2"){
                        selectionShow('2');
                    } else if( s.id == "select-row3"){
                        selectionShow('3');
                    } else if(s.id=="select-row-custom"){
                        selectionShow('4');
                    }
                    for (i = 0; i < s.length; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {

                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;

                            y = this.parentNode.getElementsByClassName("same-as-selected-orange");
                            for (k = 0; k < y.length; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected-orange");
                            break;
                        }
                    }
                    h.click();
                });
                b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function(e) {
                /*when the select box is clicked, close any other select boxes,
                and open/close the current select box:*/
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
            });
        }

        function closeAllSelect(elmnt) {
            /*a function that will close all select boxes in the document,
            except the current select box:*/
            var x, y, i, arrNo = [];
            x = document.getElementsByClassName("select-items");
            y = document.getElementsByClassName("select-selected");
            for (i = 0; i < y.length; i++) {
                if (elmnt == y[i]) {
                    arrNo.push(i);
                } else {
                    y[i].classList.remove("select-arrow-active");
                }
            }
            for (i = 0; i < x.length; i++) {
                if (arrNo.indexOf(i)) {
                    x[i].classList.add("select-hide");
                }
            }
            x = document.getElementsByClassName("select-items-orange");
            y = document.getElementsByClassName("select-selected-orange");
            for (i = 0; i < y.length; i++) {
                if (elmnt == y[i]) {
                    arrNo.push(i);
                } else {
                    y[i].classList.remove("select-arrow-active");
                }
            }
            for (i = 0; i < x.length; i++) {
                if (arrNo.indexOf(i)) {
                    x[i].classList.add("select-hide");
                }
            }
        }

        /*if the user clicks anywhere outside the select box,
        then close all select boxes:*/
        document.addEventListener("click", closeAllSelect);

        function adjustSpan(file){
            document.getElementById("display-filename").innerHTML = file.files[0].name;
        }
        function startTimer(){
            var today = new Date();
            var h = today.getHours();
            var m = today.getMinutes();
            var s = today.getSeconds();
            
            // add a zero in front of numbers<10
            m = checkTime(m);
            s = checkTime(s);
            document.getElementById('timer').innerHTML = h + ":" + m + ":" + s;
            t = setTimeout(function () {
                startTimer();
            }, 500);
            console.log("onesecon="+onesecond);
            /*if(onesecond == 1){
                if(timeuntil[2]!=-1){
                    //addTitlePlusTime();
                    console.log(timeuntil[0]+" "+timeuntil[1]+" "+timeuntil[2]);
                    if(timeuntil[2]==0){
                        timeuntil[2]=59;
                        if(timeuntil[1]==0){
                            if(timeuntil[0]==0){
                                timeuntil[0]=-1;
                                timeuntil[1]=-1;
                                timeuntil[2]=-1;
                            } else {
                                timeuntil[0]=timeuntil[0]-1;
                                timeuntil[1]=59;
                            }

                        } else{
                            timeuntil[1]=timeuntil[1]-1;
                        }

                    } else {
                        timeuntil[2]=timeuntil[2]-1;
                    }
                    addTitlePlusTime();
                    uur = timeuntil[0]*60*60;
                    minuten = timeuntil [1]*60;
                    second = timeuntil[2];
                    console.log(uur+" "+minuten+" "+second);
                    
                    tijd = uur+minuten + second;
                    console.log(tijd);
                    tijd = tijd -1;
                    console.log(tijd);
                    uur = Math.floor(tijd/3600);
                    minuten = "0"+Math.floor(tijd - uur*3600)/60;
                    second = Math.floor(tijd - uur*3600 - minuten*60);
                    console.log(uur+" "+minuten+" "+second);
                }
                onesecond = 0;
            } else {
                onesecond = 1;
            }*/
            if( checkTimer([h,m,s])==1){

                pauseTime = getPause(h,m,s);
            }
            document.getElementById('header').innerHTML = "pause: " + pauseTime + " alarm: "+nextAlarmTime
            if(pauseTime == (""+h+m+s+"")){
                audio.pause();
                audio.currentTime=0.0;
            }     
        }
        document.getElementById("test").innerHTML = 59 % 60;
        startTimer();

        function addTitlePlusTime(){
            if(document.getElementById("titlebar")!=null){
                title = document.getElementById("titlebar").value;
            }
            titletext = timeuntil[0]+":"+checkTime(timeuntil[1])+":"+checkTime(timeuntil[2])+"-"+title;
            console.log(titletext);
            document.title = titletext;
        }
    </script>
</body>
</html>